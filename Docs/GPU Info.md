# About the GPU
This document is a post/walkthrough of my GPU design, and I'll probably spin this out to be a proper blog post on my website soon.

## Hardware:
(TODO: GET A PHOTO OF THE BARE CHIPS + STUFF)
The GPU is made using:
- Z80 CPU
- Z80 SIO
- Z80 CTC
- AT28C64 EEPROM
- 65256 SRAM 
- MSP2833 2.8 inch TFT LCD (Driven by an ILI9341V)
- ATF18V8B PLD

All of these have been purchased from AliExpress over my time in the hobby, and mostly for breadboard/homebrew computer experiments.

The hardware is a bit thrown together mostly because I am finding a use for some leftover parts, more than anything. The newest addition to this is the PLD, which I ordered 5 of for the rest of the computer, so it's also a surplus part.

## Display Info:
The screen is split into a 4-line, 24 character text section and a 240x240 graphics section. Both are capable of 16-colour display. The text lines may be placed at the top or bottom of the screen, or split 2/2 on either side of the graphics.

### Why?
I thought about a few ways to organize the graphics, while using the minimum amount of hardware. Using a second 64256 would allow me to expand the VRAM to support the full graphics display at > 16 colours, but I decided this compromise was both the most efficient for my current situation, as well as a fun challenge! 16-colour seemed like the logical option, as it allows for each byte of VRAM to contain 2 pixels worth of information (each nibble represents its own pixel), and I'm sure someone who is way smarter than me could figure out a "racing-the-beam" situation to change the palette on the fly using funky DMA stuff.

## Communications
The GPU communicates with the LCD over SPI, with a 9-bit message containing a Command/Data bit, and an 8-bit data packet, either the next pixel's colour (split over 2 bytes) or a command byte.

VRAM is directly accessed by the CPU, using a DMA signal generated by accessing the memory location 0x<TBD>. This triggers the Z80's DMA behaviour, allowing the CPU to directly access VRAM. 

I have yet to actually *do* this, but it would likely cause tearing/hitching if VRAM was changed during the frame drawing process. 